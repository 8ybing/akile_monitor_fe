kind: pipeline
type: docker
name: default

steps:
  - name: build
    image: node:14
    commands:
      - npm install
      - npm run build

  - name: deploy
    pull: if-not-exists
    image: appleboy/drone-ssh
    settings:
      host: 74.48.213.218
      username: root
      password:
        from_secret: ssh_passwd
      port: 22
      source:
        - "build/*"     # 指向构建输出的文件
      target: "/akmonitor/front"  # 目标服务器路径